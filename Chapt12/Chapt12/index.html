<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>第12章 - My Docs</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">My Docs</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Welcome to MkDocs</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Chapt10</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Chapt10/Chapt10/" class="dropdown-item">多线程</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Chapt11</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Chapt11/Chapt10/" class="dropdown-item">Chapt10</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Chapt12</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">第12章</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Chapt5</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Chapt5/Chapt5/" class="dropdown-item">设计模式导论</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Chapt6</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Chapt6/Chapt6/" class="dropdown-item">软件测试及代码质量保障</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Chapt7</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Chapt7/Chapt7/" class="dropdown-item">集合与策略、迭代器模式</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Chapt8</a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Assets</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Chapt8/assets/Chapt8/" class="dropdown-item">流与输入输出</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Chapt9</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Chapt9/Chapt9/" class="dropdown-item">Swing图形用户界面</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../../Chapt11/Chapt10/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../../Chapt5/Chapt5/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#12" class="nav-link">第12章</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#_1" class="nav-link">网络通信的基本原理</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#socket" class="nav-link">Socket编程类库</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#urluniform-resource-locator" class="nav-link">URL:Uniform Resource Locator统一资源定位符</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#urlsocket" class="nav-link">URL与Socket通信的区别</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_8" class="nav-link">观察者模式</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="12">第12章</h1>
<h2 id="_1">网络通信的基本原理</h2>
<h4 id="_2">网络编程</h4>
<p>网络编程：直接或者间接通过网络协议与其他计算机进行通信，存在主要的两个问题
- 如何准确定位网络上的一台或者多台主机 》》》 IP地址、端口号等概念
- 找到主机后，如何进行可靠的高效的数据传输 》》》 网络传输协议</p>
<h4 id="ip">IP地址:唯一标识一个网络接口</h4>
<ul>
<li>一台电脑肯定有一个IP地址，也可能有多个IP地址</li>
<li>一个机器有一张网卡，那么它将有两个地址，分别是本机地址和IP地址
<img alt="alt text" src="../assets/image.png" /></li>
</ul>
<h4 id="_3">域名</h4>
<p>TCP/IP为了方便人们记忆，设计了一种字符表示地址的机制，称作域名系统DNS
一个完整的域名：
<strong>计算机主机名.本地名.组名.最高层域名</strong></p>
<h4 id="_4">网络协议</h4>
<ul>
<li>OSI模型：开放系统互联基本参考模型，这个模型只是一种理论模型
<img alt="alt text" src="../assets/image-1.png" /></li>
<li>TCP/IP协议：包括应用层、传输层、网络层、网络接口层
<strong>使用JAVA编写网络通信程序一般在应用层</strong>
<img alt="alt text" src="../assets/image-2.png" /></li>
</ul>
<h6 id="javanet">java.net包中两种常见的网络协议</h6>
<ul>
<li>TCP：传输控制协议Transmission Control Protocol</li>
<li>面向连接的、可靠的、基于字节流的传输层通信协议</li>
<li>位于IP层之上，应用层之下的中间层</li>
<li>保障了两个应用程序之间的可靠通信</li>
<li>通常用于互联网通信，称为TCP/IP</li>
<li>UDP：用户数据报协议User Datagram Protocol</li>
<li>位于OIS模型的传输层</li>
<li>一个无连接的协议，提供了应用程序之间要发送数据的数据报</li>
<li>缺乏可靠性且属于无连接协议，所以应用程序<strong>必须容许一些丢失、错误、或重复的数据包</strong><blockquote>
<p>UDP（用户数据报协议）的数据传输效率<strong>高于TCP</strong>（传输控制协议）。这是因为UDP是无连接的，不需要进行连接建立和断开，也不需要进行复杂的错误检查和恢复，因此其开销较小，数据传输效率更高。然而，这也意味着UDP不能像TCP那样提供数据的可靠性。</p>
</blockquote>
</li>
</ul>
<h2 id="socket">Socket编程类库</h2>
<h4 id="socket_1">Socket（套接字）</h4>
<p>使用了TCP协议的通信机制。使用TCP提供了两台计算机之间的通信机制，允许程序员把网络连接当成一个流。客户端程序创建一个套接字，并尝试连接服务器的套接字
<strong>Socket由一个端口号（应用程序）和一个IP地址（计算机）唯一确定</strong></p>
<h6 id="_5">服务器端</h6>
<pre><code class="language-java">public class Sever{
    public static void main(String[] args) throws IOException{
        ServerSocket ss = new ServerSocket(6666);//监听指定端口
        System.out.println(&quot;server is running&quot;);
        for(;;){
            Socket sock = ss.accept();
            System.out.println(&quot;connected from &quot; + sock.getRemoteSocketAddress());
            Thread t = new Handler(sock);
            t.start();
        }
    }
}

</code></pre>
<h6 id="_6">客户端</h6>
<p><img alt="alt text" src="../assets/image-3.png" /></p>
<h4 id="sock">Sock流</h4>
<p><img alt="alt text" src="../assets/image-4.png" /></p>
<h2 id="urluniform-resource-locator">URL:Uniform Resource Locator统一资源定位符</h2>
<p>用于从主机上读取资源(只能读取，不能向主机写)</p>
<h4 id="url">URL组成</h4>
<ul>
<li>协议名：如http、ftp、file等</li>
<li>主机名：如baidu、220.181.112.143</li>
<li>途径文件</li>
<li>端口号：如8080、8081</li>
</ul>
<h4 id="_7">例子</h4>
<p><img alt="alt text" src="../assets/image-5.png" /></p>
<h4 id="url_1">创建url类的对象的构造方法</h4>
<ul>
<li><code>public URL(String str)</code>
<img alt="alt text" src="../assets/image-6.png" /></li>
<li><code>public URL(String protocol, String host, String file)</code>
<img alt="alt text" src="../assets/image-7.png" /></li>
<li><code>public URL(String protocol, String host, String port, String file)</code>
<img alt="alt text" src="../assets/image-8.png" /></li>
<li><code>public URl(URL content, String str)</code>
<img alt="alt text" src="../assets/image-9.png" /></li>
</ul>
<h4 id="javaurl">java通过URL获得网页内容</h4>
<pre><code class="language-java"> import java.io.*;
 import java.net.URL;
 public class Main {
    public static void main(String[] args) throws Exception{
        URL url=new URL(&quot;https://www.baidu.com/&quot;);
        BufferedReader reader=new BufferedReader(new InputStreamReader(url.openStream()));
        BufferedWriter writer=new BufferedWriter(new FileWriter(&quot;info.html&quot;));
        String line;
        while((line = reader.readLine()) != null){
            System.out.println(line);
            writer.write(line);
            writer.newLine();
        }
        reader.close();
        writer.close();
    }
 }
</code></pre>
<h2 id="urlsocket">URL与Socket通信的区别</h2>
<ul>
<li>Socket</li>
<li>在服务器端运行通信程序</li>
<li>不停的监听客户端的连接请求，主动等待客户端的服务请求</li>
<li>当客户端提出请求时，马上连接通信</li>
<li><strong>服务器主动等待客户端请求</strong></li>
<li><strong>服务端可以同时与多个客户端进行互相通信</strong></li>
<li>URL</li>
<li>进行通信时，<strong>服务器被动等待客户端请求</strong></li>
<li><strong>服务器只能与一个客户进行通信</strong></li>
</ul>
<h2 id="_8">观察者模式</h2>
<h4 id="_9">说明：</h4>
<ul>
<li>在软件系统中：
  一个对象的状态或行为的变化将导致其他对象的状态或行为也发生改变，
它们之间将产生联动</li>
<li>采取观察者模式:</li>
<li>定义了对象之间一种一对多的依赖关系，让一个对象的改变能够影响其他对象</li>
<li>发生改变的对象称为<strong>观察目标</strong>，被通知的对象称为<strong>观察者</strong></li>
<li>一个观察目标可以对应多个观察者</li>
</ul>
<h4 id="_10">模式定义</h4>
<p><img alt="alt text" src="../assets/image-10.png" /></p>
<h4 id="_11">代码实现</h4>
<p><img alt="alt text" src="../assets/image-11.png" />
- 抽象目标类代码：</p>
<pre><code class="language-java">import java.util.*;
 public abstract class Subject {
    //定义一个观察者集合用于存储所有观察者对象
    protected ArrayList observers&lt;Observer&gt; = new ArrayList();
    //注册方法，用于向观察者集合中增加一个观察者
    public void attach(Observer observer) {
        observers.add(observer);
    }
    //注销方法，用于在观察者集合中删除一个观察者
    public void detach(Observer observer) {
        observers.remove(observer);
    }
    //声明抽象通知方法
    public abstract void notify();
 }
</code></pre>
<ul>
<li>具体目标类代码</li>
</ul>
<pre><code class="language-java">public class ConcreteSubject extends Subject {
    //实现通知方法
    public void notify() {
        //遍历观察者集合，调用每一个观察者的响应方法
        for(Object obs:observers) {
            ((Observer)obs).update();
        }
    }
 }
</code></pre>
<h4 id="_12">观察者模式的评价</h4>
<ul>
<li>优点：</li>
<li>可以实现表示层和数据逻辑层的分离</li>
<li>在观察目标和观察者之间建立了一个抽象的耦合</li>
<li>支持广播通信，简化了一对多系统设计的难度</li>
<li>符合开闭原则<ul>
<li>增加新的具体观察者无需修改原有系统代码</li>
<li>在具体观察者与观察目标之间不存在关联关系的情况下，增加新的观察目标也很方便</li>
</ul>
</li>
<li>缺点：</li>
<li>将所有的观察者都通知会花费<strong>很多时间</strong></li>
<li>如果存在循环依赖时可能导致<strong>系统崩溃</strong></li>
<li><strong>没有相应的机制让观察者知道所观察的目标对象是怎么发生变化的</strong>，而只是知道观察目标发生了变化。</li>
</ul>
<h4 id="_13">使用情况</h4>
<ul>
<li>一个抽象模型有两个方面，其中<strong>一个方面依赖于另外一个方面</strong>，将这两个方面封装在独立的对象中使他们可以各自<strong>独立的改变和复用</strong></li>
<li>一个对象的改变将导致一个或多个其他对象发生改变，且<strong>不知道具体有多少对象将发生改变，也不知道这些对象是是谁</strong></li>
<li>需要在系统中创建一个<strong>触发链</strong></li>
</ul></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
